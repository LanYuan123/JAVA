# 文件

-----

## 文件的逻辑结构--文件内部如何组织

所谓的逻辑结构，就是指在用户看来，文件内部的数据应该是如何组织起来的

文件的逻辑结构：
- 无结构文件
- 有结构文件
  - 顺序文件
  - 索引文件
  - 索引顺序文件
  
### 无结构文件

无结构文件：文件内部的数据就是一系列二进制流或字符流组成。又被称为“**流式文件**”

### 有结构文件

有结构文件：由一组相似的记录组成，又称“记录式文件”。每条记录由若干项数据项组成，如数据库表文件。一般来说每条记录有一个数据项可作为关键字（作为识别不同记录的ID）。根据记录的长度又可分为**定长记录**和**可变长记录**

#### 顺序文件

顺序文件：在逻辑上文件中的记录一个接一个地顺序排列，记录可以上**定长**的或者**可变长**的。各个记录在物理上可以**顺序存储**或者**链式存储**

顺序文件又可以分为**串结构**和**顺序结构**。

串结构：记录之间的顺序和关键字无关

顺序结构：记录之间的顺序按照关键字顺序排列

![顺序文件]()

#### 索引文件

在顺序文件中，可变长记录是无法实现随机访问的，我们使用索引文件可以解决这个问题。

可以为文件本身建立一张索引表，索引表的每个表项记录了每条记录的长度和指向指向记录存放地址的指针，还有索引表本身是定长记录的顺序文件，因此可以快速找到第i个记录对应的索引项。索引表还可以将关键字作为索引号内容，若按照关键字顺序排列则还可以支持按照关键字折半查找。

每当要增加/删除一条记录时，需要对索引表进行修改。由于索引文件有很快的检索速度，因此主要用于对信息处理的及时性要求比较高的场合

#### 索引顺序文件

在索引文件中，每个记录对应一个索引表项，因此索引表可能会很大。可以使用索引顺序文件来解决这个问题

索引顺序文件是索引文件和顺序文件思想的结合。索引顺序文件中，同样会文件建立一张索引表，但不同的是：并**不是每个记录对应一个索引项**，而是**一组记录对应一个索引表项**。

在索引顺序文件中，我们先将文件的记录进行分组，再为每个分组建立一张索引表，为了**进一步提高检索效率**，可以为顺序文件**建立多级索引表**，即将顺序文件进行多次分组，为每次分组建立索引文件

-----

## 文件的目录结构--文件之间如何组织

### 文件控制块

### 索引节点（文件控制块的优化）

### 目录结构

#### 单击目录结构

#### 两级目录结构

#### 树形目录结构

#### 无环图目录结构

-----

## 操作系统提供的关于文件的系统调用

-----

## 文件共享

-----

## 文件保护

-----

# 外存

-----

## 文件的物理结构--外存非空闲块管理

-----

## 外存空闲块管理

-----

## 磁盘的结构

-----

## 磁盘调度算法

-----

## 减少磁盘延迟的方法

-----

## 磁盘管理

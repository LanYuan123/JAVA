

## 中断

![]()

### 中断机制的诞生

在早期的计算机中，各个程序只能串行的执行，在一个程序移入内存之后，占用CPU资源开始运行，在运行结束后，等待IO设备输出操作结束后，这个程序才会从内存中移除，接下来第二道程序才移入内存，进行一样的操作过程，在这种方式下，在计算机的内存中同一时刻最多只能有一道程序运行，这样程序就是串行执行，将会导致计算机的利用率低

为了解决以上的资源利用率低的问题，**于是人们就引入了操作系统作为计算机的管理者，操作系统引入中断机制，实现了多批道程序的并发执行**，解决了资源利用率低的问题

本质上来说：**发生了中断，就意味着操作系统的介入，开展管理工作**


### 中断的概念和作用

比如说，第一道程序在内存中运行，在运行了一段时间之后，当时间片使用完，CPU的计时部件会向CPU发出一个终端信号，让CPU切换为核心态，将CPU的权限交给操作系统，操作系统对中断进行处理，操作系统发现刚才的中断是告诉它刚才进程的时间片已经用完了，于是操作系统切换进程2进行运行，这就是操作系统开展的管理工作。操作系统在切换为进程2运行时，CPU会转换为用户态，进程2就在用户态下开始执行，进程2在运行了一段时间之后可能会发出类似于系统调用之类的内中断信号，这时CPU进入到核心态，由操作系统接管，对中断信号进行处理，处理完之后根据情况在切换进程，或者就原进程继续运行。

所以总的来说：**进程或者I/O设备产生中断，这时CPU从用户态切换为核心态，将权限交由操作系统，操作系统对中断进行处理，处理完之后根据情况切换进程，或者就原进程继续运行**

- **当中断发生后，CPU会立即进入和心态**
- **当中断发生后，当前运行的进程会暂停运行，将权限交由操作系统内核对中断进行处理**
- **对于不同的中断信号，操作系统做不同的处理

发生了中断，就意味着需要操作系统介入，开展管理工作，由于操作系统的管理工作（例如进程切换、分配I/O设备等）需要特权指令，而特权指令在CPU用户态下是无法使用的，因此CPU会由用户态转入核心态，**所以说CPU从用户态切换为核心态是通过中断实现的，而且中断也是唯一的途径**有了中断，才有了多道程序的并发执行

### 中断的分类

![]()
